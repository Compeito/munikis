{% extends 'base.html' %}
{% load render_bundle from webpack_loader %}
{% load bulma_tags %}

{% block page_title %}{% endblock %}
{% block ogp_page_title %}{% endblock %}
{% block description %}{% endblock %}
{% block ogp_description %}{% endblock %}
{% block ogp_image %}{% endblock %}
{% block ogp_twitter_creator %}{% endblock %}

{% block head %}
  {% render_bundle 'core/watch' %}
{% endblock %}

{% block header %}{% endblock %}

{% block content %}
  <div class="column is-two-thirds">
    {% include 'core/components/video.html' %}
    {% if video.user == request.user %}
      <div class="level">
        <div class="level-left"></div>
        <div class="level-right">
          <a href="/edit/{{ video.slug }}" class="button is-primary level-item">動画情報の編集</a>
          <a href="/thumbnail/{{ video.slug }}" class="button is-primary level-item">サムネイル編集</a>
        </div>
      </div>
    {% endif %}
    <form target="/ajax/comments/add/{{ video.slug }}" class="ajax-form">
      {% csrf_token %}
      {{ form|bulma }}
      <button type="submit" class="button is-info">送信</button>
    </form>
    <section class="section">
      <div id="v-comment-list" class="box">
        <template v-if="isEmpty">
          <p>コメントはありません</p>
        </template>
        <template v-for="comment in comments" v-else>
          <v-comment-item :comment="comment"></v-comment-item>
        </template>
      </div>
    </section>
    {% include 'core/components/v-comment-item.html' %}
  </div>
{% endblock %}

{% block scripts %}
  {% render_bundle 'core/comments' %}
{% endblock %}
